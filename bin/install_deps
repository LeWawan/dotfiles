#!/usr/bin/env zsh

BASE_DIR=$(pwd)

# nvim latest installation
cd ~
if [[ -f ~/nvim-macos.tar.gz ]]; then
  rm ~/nvim-macos.tar.gz
fi
wget https://github.com/neovim/neovim/releases/download/stable/nvim-macos.tar.gz
tar -xzf nvim-macos.tar.gz
rm ~/nvim-macos.tar.gz
cd $BASE_DIR
echo "[install] latest nvim installed"

# Packer nvim installation
if [[ -d ~/.local/share/nvim/site/pack/packer/start/packer.nvim ]];then
  rm -rf ~/.local/share/nvim/site/pack/packer/start/packer.nvim
fi
git clone --depth 1 https://github.com/wbthomason/packer.nvim\
 ~/.local/share/nvim/site/pack/packer/start/packer.nvim
echo "[install] packer vim installed"

# nvm (manual install)
export NVM_DIR="$HOME/.nvm" && (
  git clone https://github.com/nvm-sh/nvm.git "$NVM_DIR"
  cd "$NVM_DIR"
  git checkout `git describe --abbrev=0 --tags --match "v[0-9]*" $(git rev-list --tags --max-count=1)`
) && \. "$NVM_DIR/nvm.sh"

# pnpm
npm install -g pnpm
echo "[install] pnpm installed"

# antfu ni
# https://github.com/antfu/ni
npm i -g @antfu/ni
echo "[install] antfu/ni"
